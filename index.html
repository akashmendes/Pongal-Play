<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pongal Office Game ‚Äî Scoreboard (V2)</title>

  <style>
    :root{
      --bg: #070b14;
      --panel: rgba(255,255,255,0.06);
      --line: rgba(255,255,255,0.12);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.55);

      --goodA: rgba(34,197,94,0.22);
      --goodB: rgba(59,130,246,0.12);

      --evilA: rgba(239,68,68,0.30);
      --evilB: rgba(0,0,0,0.40);

      --shadow: 0 20px 60px rgba(0,0,0,0.45);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1000px 500px at 20% 10%, rgba(59,130,246,0.16), transparent 55%),
        radial-gradient(900px 500px at 85% 25%, rgba(34,197,94,0.12), transparent 60%),
        var(--bg);
      color: var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      overflow:hidden;
    }

    .wrap{
      width:min(1100px, 100%);
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    /* TOP BAR */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px 16px;
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 18px;
      box-shadow: var(--shadow);
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .brand .title{
      font-weight: 900;
      letter-spacing: 0.2px;
    }
    .brand .hint{
      font-size: 12px;
      color: var(--muted);
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,0.28);
      font-weight: 800;
      font-size: 12px;
      white-space:nowrap;
    }

    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size: 12px;
      padding: 2px 8px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,0.35);
      color: var(--text);
      font-weight: 900;
    }

    /* MAIN TIMER */
    .stage{
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 22px;
      box-shadow: var(--shadow);
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:14px;
      overflow:hidden;
      position:relative;
    }

    .timerCard{
      border-radius: 20px;
      border: 1px solid var(--line);
      padding:22px 18px;
      background: linear-gradient(135deg, var(--goodA), var(--goodB));
      position:relative;
      overflow:hidden;
      transition: 0.18s ease;
    }

    .timerRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    .bigTime{
      font-size: 92px;
      line-height: 0.95;
      font-weight: 950;
      letter-spacing: -3px;
    }

    @media (max-width: 700px){
      .bigTime{ font-size: 70px; }
    }

    .subline{
      margin-top:8px;
      color: rgba(255,255,255,0.75);
      font-weight: 800;
    }

    .modeBadge{
      padding:10px 14px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,0.22);
      font-weight: 950;
      letter-spacing: 0.4px;
      font-size: 12px;
    }

    .buttons{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
    }

    button{
      cursor:pointer;
      border: 1px solid var(--line);
      background: rgba(0,0,0,0.35);
      color: var(--text);
      padding:11px 14px;
      border-radius: 14px;
      font-weight: 900;
      transition: 0.15s ease;
      user-select:none;
    }
    button:hover{ transform: translateY(-1px); }
    button:active{ transform: translateY(0px) scale(0.98); }

    button.primary{
      background: rgba(255,255,255,0.10);
    }
    button.good{
      background: rgba(34,197,94,0.22);
      border-color: rgba(34,197,94,0.45);
    }
    button.bad{
      background: rgba(239,68,68,0.22);
      border-color: rgba(239,68,68,0.45);
    }

    .toast{
      margin-top:12px;
      padding:10px 12px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      color: rgba(255,255,255,0.72);
      font-size: 13px;
    }

    /* SCOREBOARD */
    .scores{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }

    @media (max-width: 900px){
      .scores{ grid-template-columns: 1fr; }
    }

    .teamTile{
      border-radius: 18px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.03);
      padding:14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      transition: 0.15s ease;
    }

    .teamLeft{
      display:flex;
      flex-direction:column;
      gap:2px;
    }

    .teamName{
      font-weight: 950;
      font-size: 16px;
    }
    .teamMeta{
      color: var(--muted);
      font-size: 12px;
      font-weight: 700;
    }

    .teamScore{
      font-weight: 950;
      font-size: 34px;
      letter-spacing: -1px;
    }

    .active{
      outline: 2px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.06);
      transform: translateY(-1px);
    }

    /* HOST PANEL */
    .host{
      display:none;
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 18px;
      padding:14px;
    }
    .host.show{ display:block; }

    .hostTitle{
      font-weight: 950;
      margin-bottom:10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }

    .row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      margin-bottom:10px;
    }

    select{
      border: 1px solid var(--line);
      background: rgba(0,0,0,0.35);
      color: var(--text);
      padding:11px 12px;
      border-radius: 14px;
      font-weight: 900;
      outline:none;
    }

    .mini{
      font-size: 12px;
      color: var(--muted);
      font-weight: 700;
    }

    /* EVIL MODE takeover */
    .evil .timerCard{
      background: linear-gradient(135deg, var(--evilA), var(--evilB));
      border-color: rgba(255,0,0,0.25);
      animation: shake 0.22s infinite;
    }

    .evil .modeBadge{
      background: rgba(239,68,68,0.25);
      border-color: rgba(239,68,68,0.45);
    }

    .evil body{}

    .evilOverlay{
      pointer-events:none;
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(900px 400px at 20% 20%, rgba(239,68,68,0.14), transparent 60%),
        radial-gradient(700px 350px at 80% 30%, rgba(239,68,68,0.10), transparent 55%),
        linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.30));
      opacity:0;
      transition: 0.2s ease;
    }
    .evil .evilOverlay{ opacity:1; }

    @keyframes shake {
      0% { transform: translate(0px,0px); }
      25% { transform: translate(2px,0px); }
      50% { transform: translate(-2px,1px); }
      75% { transform: translate(2px,-1px); }
      100% { transform: translate(0px,0px); }
    }
  </style>
</head>

<body>
  <div class="wrap" id="root">

    <!-- TOP BAR -->
    <div class="topbar">
      <div class="brand">
        <div class="title">üåæ Pongal Office Game</div>
        <div class="hint">Press <span class="kbd">H</span> to toggle Host Panel</div>
      </div>
      <div class="pill" id="roundPill">Round 1 ‚Ä¢ Correct +10</div>
    </div>

    <!-- MAIN STAGE -->
    <div class="stage" id="stage">
      <div class="evilOverlay"></div>

      <div class="timerCard" id="timerCard">
        <div class="timerRow">
          <div>
            <div class="bigTime" id="timeText">20</div>
            <div class="subline" id="turnText">Ven Pongal ‚Ä¢ Player 1/5</div>
          </div>
          <div class="modeBadge" id="modeBadge">üòá SILENT MODE</div>
        </div>

        <div class="buttons">
          <button class="primary" id="startBtn">Start</button>
          <button id="pauseBtn">Pause</button>
          <button id="resetBtn">Reset</button>
        </div>

        <div class="toast" id="toast">
          Ready. Start the turn. At 10s the screen goes üòà.
        </div>
      </div>

      <!-- SCOREBOARD -->
      <div class="scores">
        <div class="teamTile active" id="tileVen">
          <div class="teamLeft">
            <div class="teamName">Ven Pongal</div>
            <div class="teamMeta">Team 1</div>
          </div>
          <div class="teamScore" id="scoreVen">0</div>
        </div>

        <div class="teamTile" id="tileSak">
          <div class="teamLeft">
            <div class="teamName">Sakkarai Pongal</div>
            <div class="teamMeta">Team 2</div>
          </div>
          <div class="teamScore" id="scoreSak">0</div>
        </div>

        <div class="teamTile" id="tileNei">
          <div class="teamLeft">
            <div class="teamName">Nei Pongal</div>
            <div class="teamMeta">Team 3</div>
          </div>
          <div class="teamScore" id="scoreNei">0</div>
        </div>
      </div>

      <!-- HOST PANEL (Hidden) -->
      <div class="host" id="hostPanel">
        <div class="hostTitle">
          <div>üòà Host Panel</div>
          <div class="mini">You control everything here.</div>
        </div>

        <div class="row">
          <select id="teamSelect">
            <option value="Ven Pongal">Ven Pongal</option>
            <option value="Sakkarai Pongal">Sakkarai Pongal</option>
            <option value="Nei Pongal">Nei Pongal</option>
          </select>

          <button id="prevPlayerBtn">‚¨Ö Prev Player</button>
          <button id="nextPlayerBtn">Next Player ‚û°</button>

          <button class="primary" id="round1Btn">Round 1</button>
          <button class="primary" id="round2Btn">Hard Round</button>
        </div>

        <div class="row">
          <button class="good" id="correctBtn">‚úÖ Correct</button>
          <button class="primary" id="stealBtn">‚ö° Steal (+5)</button>
          <button class="bad" id="failBtn">‚ùå Fail</button>
          <button class="bad" id="penaltyBtn">üö´ Penalty</button>
          <button id="undoBtn">‚Ü© Undo</button>
          <button class="bad" id="resetMatchBtn">üßπ Reset Match</button>
        </div>

        <div class="mini">
          Tip: Correct ends the timer automatically. Undo saves your life.
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== STATE =====
    const state = {
      round: 1,
      team: "Ven Pongal",
      player: 1,
      maxPlayers: 5,
      scores: {
        "Ven Pongal": 0,
        "Sakkarai Pongal": 0,
        "Nei Pongal": 0
      },
      timer: {
        value: 20,
        running: false,
        id: null
      },
      history: []
    };

    // ===== ELEMENTS =====
    const root = document.getElementById("root");
    const stage = document.getElementById("stage");
    const hostPanel = document.getElementById("hostPanel");

    const roundPill = document.getElementById("roundPill");
    const timeText = document.getElementById("timeText");
    const turnText = document.getElementById("turnText");
    const modeBadge = document.getElementById("modeBadge");
    const toast = document.getElementById("toast");

    const scoreVen = document.getElementById("scoreVen");
    const scoreSak = document.getElementById("scoreSak");
    const scoreNei = document.getElementById("scoreNei");

    const tileVen = document.getElementById("tileVen");
    const tileSak = document.getElementById("tileSak");
    const tileNei = document.getElementById("tileNei");

    const startBtn = document.getElementById("startBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const resetBtn = document.getElementById("resetBtn");

    const teamSelect = document.getElementById("teamSelect");
    const prevPlayerBtn = document.getElementById("prevPlayerBtn");
    const nextPlayerBtn = document.getElementById("nextPlayerBtn");

    const round1Btn = document.getElementById("round1Btn");
    const round2Btn = document.getElementById("round2Btn");

    const correctBtn = document.getElementById("correctBtn");
    const stealBtn = document.getElementById("stealBtn");
    const failBtn = document.getElementById("failBtn");
    const penaltyBtn = document.getElementById("penaltyBtn");
    const undoBtn = document.getElementById("undoBtn");
    const resetMatchBtn = document.getElementById("resetMatchBtn");

    // ===== HELPERS =====
    function correctPoints(){
      return state.round === 1 ? 10 : 15;
    }

    function isAttack(){
      return state.timer.value <= 10 && state.timer.value > 0;
    }

    function setToast(msg){
      toast.innerHTML = msg;
    }

    function stopTimer(){
      state.timer.running = false;
      if(state.timer.id) clearInterval(state.timer.id);
      state.timer.id = null;
    }

    function resetTimer(){
      stopTimer();
      state.timer.value = 20;
      setToast("Ready. Start the turn. At 10s the screen goes üòà.");
      updateUI();
    }

    function startTimer(){
      if(state.timer.running) return;
      state.timer.running = true;

      state.timer.id = setInterval(() => {
        if(state.timer.value <= 0){
          stopTimer();
          setToast("‚è±Ô∏è Time up. Click Fail / Steal / Penalty.");
          updateUI();
          return;
        }

        state.timer.value -= 1;

        if(state.timer.value === 10){
          setToast("üòà ATTACK MODE! Distraction allowed now!");
        }

        if(state.timer.value === 5){
          setToast("‚ö†Ô∏è 5 seconds left‚Ä¶ PANIC üò≠");
        }

        updateUI();
      }, 1000);
    }

    function addPoints(team, points, label){
      state.history.push({
        type: "score",
        team,
        before: state.scores[team],
        points,
        label,
        round: state.round,
        player: state.player
      });

      state.scores[team] += points;
      setToast(`${label}: <b>${team}</b> ${points >= 0 ? "+" : ""}${points}`);
      updateUI();
    }

    function undo(){
      const last = state.history.pop();
      if(!last){
        setToast("Nothing to undo üòÖ");
        return;
      }
      if(last.type === "score"){
        state.scores[last.team] = last.before;
        setToast(`Undo: <b>${last.team}</b> reverted.`);
      }
      updateUI();
    }

    function resetMatch(){
      stopTimer();
      state.round = 1;
      state.team = "Ven Pongal";
      state.player = 1;
      state.maxPlayers = 5;
      state.scores["Ven Pongal"] = 0;
      state.scores["Sakkarai Pongal"] = 0;
      state.scores["Nei Pongal"] = 0;
      state.timer.value = 20;
      state.history = [];
      setToast("Fresh match. New chaos. üòà");
      updateUI();
    }

    function updateUI(){
      // Round pill
      roundPill.textContent =
        state.round === 1
          ? `Round 1 ‚Ä¢ Correct +10`
          : `Hard Round ‚Ä¢ Correct +15`;

      // Time + mode
      timeText.textContent = state.timer.value;
      if(isAttack()){
        stage.classList.add("evil");
        modeBadge.textContent = "üòà ATTACK MODE";
      } else {
        stage.classList.remove("evil");
        modeBadge.textContent = "üòá SILENT MODE";
      }

      // Turn text
      turnText.textContent = `${state.team} ‚Ä¢ Player ${state.player}/${state.maxPlayers}`;

      // Scores
      scoreVen.textContent = state.scores["Ven Pongal"];
      scoreSak.textContent = state.scores["Sakkarai Pongal"];
      scoreNei.textContent = state.scores["Nei Pongal"];

      // Active tile highlight
      tileVen.classList.toggle("active", state.team === "Ven Pongal");
      tileSak.classList.toggle("active", state.team === "Sakkarai Pongal");
      tileNei.classList.toggle("active", state.team === "Nei Pongal");

      // Sync dropdown
      teamSelect.value = state.team;
    }

    // ===== EVENTS =====
    startBtn.addEventListener("click", () => {
      setToast("Turn started. First 10 seconds = peaceful üòá");
      startTimer();
      updateUI();
    });

    pauseBtn.addEventListener("click", () => {
      stopTimer();
      setToast("Paused üòå");
      updateUI();
    });

    resetBtn.addEventListener("click", () => resetTimer());

    teamSelect.addEventListener("change", (e) => {
      state.team = e.target.value;
      setToast(`Team set to <b>${state.team}</b>`);
      updateUI();
    });

    prevPlayerBtn.addEventListener("click", () => {
      state.player = Math.max(1, state.player - 1);
      setToast(`Player: ${state.player}/${state.maxPlayers}`);
      updateUI();
    });

    nextPlayerBtn.addEventListener("click", () => {
      state.player = Math.min(state.maxPlayers, state.player + 1);
      setToast(`Player: ${state.player}/${state.maxPlayers}`);
      updateUI();
    });

    round1Btn.addEventListener("click", () => {
      state.round = 1;
      state.maxPlayers = 5;
      state.player = Math.min(state.player, state.maxPlayers);
      setToast("Round 1 active. Correct = +10");
      updateUI();
    });

    round2Btn.addEventListener("click", () => {
      state.round = 2;
      state.maxPlayers = 3;
      state.player = Math.min(state.player, state.maxPlayers);
      setToast("Hard Round active üòà Correct = +15");
      updateUI();
    });

    correctBtn.addEventListener("click", () => {
      stopTimer();
      addPoints(state.team, correctPoints(), "‚úÖ Correct");
    });

    stealBtn.addEventListener("click", () => {
      stopTimer();
      const stealTeam = prompt("Steal team? Type: Ven / Sakkarai / Nei");
      if(!stealTeam) return;

      const map = {
        "ven": "Ven Pongal",
        "sakkarai": "Sakkarai Pongal",
        "nei": "Nei Pongal"
      };

      const chosen = map[stealTeam.trim().toLowerCase()];
      if(!chosen){
        setToast("Invalid steal team üò≠ Type Ven / Sakkarai / Nei");
        return;
      }

      addPoints(chosen, 5, `‚ö° Steal from ${state.team}`);
    });

    failBtn.addEventListener("click", () => {
      stopTimer();
      setToast(`‚ùå Fail: <b>${state.team}</b> gets 0`);
      updateUI();
    });

    penaltyBtn.addEventListener("click", () => {
      stopTimer();
      setToast(`üö´ Penalty: <b>${state.team}</b> gets 0 (chit back)`);
      updateUI();
    });

    undoBtn.addEventListener("click", () => undo());

    resetMatchBtn.addEventListener("click", () => {
      const ok = confirm("Reset match? Scores will be wiped.");
      if(ok) resetMatch();
    });

    // Host panel toggle
    window.addEventListener("keydown", (e) => {
      if(e.key.toLowerCase() === "h"){
        hostPanel.classList.toggle("show");
        setToast(hostPanel.classList.contains("show")
          ? "Host Panel OPEN üòà"
          : "Host Panel HIDDEN üòá");
      }
    });

    // Init
    updateUI();
  </script>
</body>
</html>
